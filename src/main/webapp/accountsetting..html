<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>구해줘용</title>
    <link href="./css/reset.css" rel="stylesheet" />
    <link href="./css/header.css" rel="stylesheet" />
    <link href="./css/footer.css" rel="stylesheet" />
    <link href="./css/main.css" rel="stylesheet" />
    <link href="./css/wanted.css" rel="stylesheet" />
    <link href="./css/wanted-detail.css" rel="stylesheet" />
    <link href="./css/company-detail.css" rel="stylesheet" />
    <link href="./css/subscribes.css" rel="stylesheet" />
    <link href="./css/accountsetting.css" rel="stylesheet" />
    <script
      src="https://kit.fontawesome.com/e264982194.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script src="/webjars/jquery/jquery.min.js"></script>
    <script src="/webjars/sockjs-client/sockjs.min.js"></script>
    <script src="/webjars/stomp-websocket/stomp.min.js"></script>
    <script src="./js/webSocket.js"></script>

    <!-- 사용자 기본정보 수정 -->
    <script>
      $('#btnUpdate').click(() => {
        update();
      });

      function update() {
        let data = {
          userName: $('#userName').val(),
          email: $('#email').val(),
          phoneNumber: $('#phoneNumber').val(),
        };

        let id = $('#id').val();

        $.ajax('/api/users/as/' + id, {
          type: 'PUT',
          dataType: 'json',
          data: JSON.stringify(data),
          headers: {
            'Content-Type': 'application/json; charset=utf-8',
          },
        }).done((res) => {
          if (res.code == 1) {
            alert('회원 수정 완료');
            location.reload(); // f5
          } else {
            alert('업데이트에 실패하였습니다');
          }
        });
      }
    </script>
  </head>

  <body>
    <header class="header">
      <div class="header_inner">
        <div class="menu">
          <button class="btn_menu">메뉴</button>
          <ul class="dropdown_menu">
            <li class="menu_top">포지션 목록</li>
            <li><a class="dropdown_item" href="#">백앤드 개발자</a></li>
            <li><a class="dropdown_item" href="#">웹 퍼블리셔</a></li>
            <li><a class="dropdown_item" href="#">프론트앤드 개발자</a></li>
            <li class="menu_bottom">구직은 구해줘용과 함께</li>
          </ul>
        </div>

        <h1 class="logo">
          <a href="#">구해줘용</a>
        </h1>

        <ul class="gnb">
          <li><a href="#">채용</a></li>
          <li><a href="#">이력서</a></li>
        </ul>

        <ul class="login">
          <li class="alert">
            <a href="/mypage/id">알림</a>

            <ul class="alert_item_list">
              <li>
                <a class="alert_item">
                  <div class="messages"></div>
                </a>
              </li>
            </ul>
          </li>
          <li>
            <p class="notifications"></p>
          </li>

          <li class="profile">
            <a href="#">프로필</a>
            <ul class="profile_list">
              <li>
                <a class="profile_item_mypage" href="/mypage/principal.id"
                  >My page</a
                >
              </li>
              <li>
                <a
                  class="profile_item"
                  href="/applicationstatusall/principal.id"
                  >지원 현황</a
                >
              </li>
              <li>
                <a class="profile_item" href="/proposal/principal.id"
                  >제안받기 현황</a
                >
              </li>
              <li><a class="profile_item" href="#">좋아요</a></li>
              <li><a class="profile_item" href="/subscribes/id">구독</a></li>
              <li>
                <a class="profile_item_logout" href="/logout">로그아웃</a>
              </li>
            </ul>
          </li>
        </ul>
        <ul class="companyservice">
          <li><a href="#">기업 서비스</a></li>
        </ul>
      </div>
    </header>

    <div id="wrap">
      <div id="as_wrap">
        <div class="as_menu">
          <p class="as_title">계정설정</p>
          <ul>
            <li class="as_position">
              <a href="/users/as/id">기본정보 수정</a>
            </li>
            <li class="as_proposal">
              <a href="/users/profile">프로필 수정</a>
            </li>
            <li class="as_proposal">
              <a href="/users/password/id">비밀번호 설정</a>
            </li>
            <li class="as_proposal">
              <a href="/users/delete/id">회원 탈퇴</a>
            </li>
          </ul>
        </div>
        <!--as_menu-->
        <div class="as_edit">
          <form>
            <input id="id" type="hidden" value="id" />
            <div>
              <strong>기본정보 수정</strong>
            </div>
            <div>
              <span
                >지원 결과 또는 추천 포지션 정보를 받아볼 이메일/연락처 정보
                입력해주세요.</span
              >
            </div>
            <div class="as_img">
              <div class="photo">
                <img src="" class="input_img" />
              </div>
              <!--photo-->
              <div class="img">
                <div class="plus">
                  <label for="file" class="input_file">+ </label>
                  <input type="file" id="file" onchange="readFile(this)" />
                </div>
                <div class="text">사진 변경하기</div>
              </div>
              <!--img-->
            </div>
            <!--as_img-->
            <div class="as_detail">
              <div class="as_detail_name">
                <h6>이름</h6>
                <input
                  id="userName"
                  type="text"
                  class="input_userName"
                  value="사용자명"
                />
              </div>
              <div class="as_detail_email">
                <h6>이메일</h6>
                <input
                  id="email"
                  type="email"
                  class="input_email"
                  value="사용자 이메일주소"
                />
              </div>
              <div class="as_detail_phone">
                <h6>전화번호</h6>
                <input
                  id="phoneNumber"
                  type="text"
                  class="input_phone"
                  value="사용자 전화번호"
                />
              </div>
            </div>
            <!--as_detail-->
            <div class="as_button">
              <button id="btnUpdate" type="button">완료</button>
            </div>
          </form>
        </div>
        <!--.as_edit-->
      </div>
      <!--.as_wrap-->
    </div>

    <footer class="footer">
      <div class="footer_inner">
        <div class="top">
          <ul class="gnb">
            <li class="logo">구해줘용</li>
            <li><a href="#">기업소개</a></li>
            <li><a href="#">이용약관</a></li>
            <li><a href="#">개인정보 처리방침</a></li>
            <li><a href="#">고객센터</a></li>
          </ul>
        </div>

        <div class="bottom">
          <p>
            (주)구해줘용 (대표이사:구용길) | 서울특별시 용산구 독서당로 111
            한남더힐 12층 | 통신판매번호 : 2020-서울용산-3147
          </p>
          <p>
            유료직업소개사업등록번호 : (국내) 제2022-221001-243-2-00006호 |
            (국외) 서울가고싶부-유-2020-2 | 사업자등록번호 : 012-34-56789 |
            02-123-4567
          </p>
          <p>© 9DoIT, Inc.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
